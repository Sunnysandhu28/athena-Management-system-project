{% extends 'base.html' %}

{% block title %}Learn from Policy Template{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row mb-4">
        <div class="col">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('index') }}">Home</a></li>
                    <li class="breadcrumb-item active">Learn from Template</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col">
            <h1>Policy Template Learning</h1>
            <p class="lead">Upload a policy template for the AI to analyze and learn from</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8">
            <div class="card mb-4">
                <div class="card-header">
                    <h2 class="card-title h5 mb-0">Upload Template</h2>
                </div>
                <div class="card-body">
                    <p>Upload a PDF template that represents the ideal structure for policies. The AI will:</p>
                    <ul>
                        <li>Analyze the template structure</li>
                        <li>Identify section patterns and relationships</li>
                        <li>Learn from the style and formatting</li>
                        <li>Apply these learnings to future policy enhancements</li>
                    </ul>
                    
                    <form method="POST" action="{{ url_for('ai_policy_learning.learn_from_template') }}" enctype="multipart/form-data">
                        <div class="form-group">
                            <label for="template_file">Select template file (PDF format):</label>
                            <div class="custom-file">
                                <input type="file" class="custom-file-input" id="template_file" name="template_file" accept=".pdf" required>
                                <label class="custom-file-label" for="template_file">Choose file...</label>
                            </div>
                            <small class="form-text text-muted">Upload a well-structured policy document in PDF format</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="iterations">Learning iterations:</label>
                            <input type="number" class="form-control" id="iterations" name="iterations" 
                                value="1000" min="100" max="2000">
                            <small class="form-text text-muted">Number of learning iterations to perform (higher values provide more thorough learning)</small>
                        </div>
                        
                        <div class="form-group text-center mt-4">
                            <button type="submit" class="btn btn-primary">Start Learning</button>
                            <a href="{{ current_url }}" class="btn btn-secondary ml-2">Cancel</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card mb-4">
                <div class="card-header">
                    <h2 class="card-title h5 mb-0">Template Requirements</h2>
                </div>
                <div class="card-body">
                    <p>For best results, upload a template that contains:</p>
                    <ul>
                        <li>Clear section headers</li>
                        <li>Proper formatting and structure</li>
                        <li>All standard policy sections</li>
                        <li>Well-defined relationships between sections</li>
                    </ul>
                    
                    <div class="alert alert-info mt-3">
                        <small>
                            <i class="fa fa-info-circle"></i> Recommendation: Use an exemplary policy 
                            document that follows all best practices and regulatory requirements.
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    // Update file input label with selected filename
    $('input[type="file"]').change(function(e) {
        var fileName = e.target.files[0].name;
        $('.custom-file-label').html(fileName);
    });
</script>
{% endblock %}